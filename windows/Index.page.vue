<template>
  <div class="app-container">
    <!-- å·¦ä¾§èœå• -->
    <div class="sidebar">
      <div class="logo">
        <h2>MixOne</h2>
      </div>
      <nav class="nav-menu">
        <div 
          class="nav-item" 
          :class="{ active: activeTab === 'home' }"
          @click="activeTab = 'home'"
        >
          <i class="icon">ğŸ </i>
          <span>é¦–é¡µ</span>
        </div>
        <div 
          class="nav-item" 
          :class="{ active: activeTab === 'syntax' }"
          @click="activeTab = 'syntax'"
        >
          <i class="icon">ğŸ¬</i>
          <span>è¯­æ³•ç³–</span>
        </div>
        <div 
          class="nav-item" 
          :class="{ active: activeTab === 'window' }"
          @click="activeTab = 'window'"
        >
          <i class="icon">ğŸªŸ</i>
          <span>çª—å£ç®¡ç†</span>
        </div>
      </nav>
    </div>

    <!-- å³ä¾§å†…å®¹åŒºåŸŸ -->
    <div class="main-content">
      <!-- é¦–é¡µå†…å®¹ -->
      <div v-if="activeTab === 'home'" class="content-section">
        <h1>æ¬¢è¿ä½¿ç”¨ MixOne å·¥å…·</h1>
        <div class="intro-card">
          <h3>ğŸš€ å…³äº MixOne</h3>
          <p>MixOne æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ Electron + Vue å¼€å‘å·¥å…·ï¼Œæ—¨åœ¨æä¾›é«˜æ•ˆçš„æ¡Œé¢åº”ç”¨å¼€å‘ä½“éªŒã€‚</p>
          
          <h4>âœ¨ ä¸»è¦ç‰¹æ€§</h4>
          <ul>
            <li><strong>ç°ä»£åŒ–æ¶æ„</strong> - åŸºäº Electron + Vue 2/3 æ„å»º</li>
            <li><strong>çƒ­é‡è½½æ”¯æŒ</strong> - å¼€å‘è¿‡ç¨‹ä¸­å®æ—¶é¢„è§ˆæ›´æ”¹</li>
            <li><strong>å¤šçª—å£ç®¡ç†</strong> - çµæ´»çš„çª—å£åˆ›å»ºå’Œç®¡ç†æœºåˆ¶</li>
            <li><strong>è¯­æ³•ç³–æ”¯æŒ</strong> - æä¾›ä¸°å¯Œçš„å¼€å‘è¯­æ³•ç³–ï¼Œæå‡å¼€å‘æ•ˆç‡</li>
            <li><strong>è·¨å¹³å°å…¼å®¹</strong> - æ”¯æŒ Windowsã€macOSã€Linux</li>
          </ul>

          <h4>ğŸ› ï¸ æŠ€æœ¯æ ˆ</h4>
          <div class="tech-stack">
            <span class="tech-tag">Electron</span>
            <span class="tech-tag">Vue.js</span>
            <span class="tech-tag">Node.js</span>
            <span class="tech-tag">Vite</span>
          </div>
          <div>
            <a href="html-window/index.html" native-target="_window">çª—å£æ‰“å¼€è·¯å¾„è®¾è®¡ã€å¼€å‘è°ƒè¯•</a>
          </div>
          <div>
            <a href="old-window/index.html" native-target="_window">è¯­æ³•è®¾è®¡ã€çª—å£ç®¡ç†ç±»ã€ä»¥åŠå…¶ä»–æ‰€æœ‰ç‰¹æ€§</a>
          </div>
        </div>
      </div>

      <!-- è¯­æ³•ç³–å†…å®¹ -->
      <div v-if="activeTab === 'syntax'" class="content-section">
        <h1>è¯­æ³•ç³–ä½¿ç”¨æ¡ˆä¾‹</h1>
        
        <div class="example-card">
            <h3>ğŸ­ Vue ç»„ä»¶è¯­æ³•ç³–</h3>
            <div class="code-example">
                <h4>1. è·å–ç³»ç»Ÿçš„documentsç›®å½•ã€‚ </h4>
                <p>ä¼ ç»Ÿå†™æ³•ï¼š</p>
                <pre>
    // é¦–å…ˆ è¦åœ¨ä¸»è¿›ç¨‹ä¸­ç›‘å¬è¯·æ±‚ã€‚
    const { app } = Require('electron')
    let documentsPath = app.getPath('documents');
    // è¿˜éœ€è¦åœ¨ä¸»è¿›ç¨‹ç›‘å¬æ¸²æŸ“è¿›ç¨‹å‘é€çš„äº‹ä»¶
    ipcMain.on('getDocuments', (event, arg) => {
        // å›å¤æ¸²æŸ“è¿›ç¨‹
        event.reply('main-documents-reply', documentsPath);
    });
    // å…¶æ¬¡ åœ¨æ¸²æŸ“è¿›ç¨‹è¿˜éœ€è¦ç›‘å¬å“åº”å›å¤çš„ç»“æœ
    ipcRenderer.on('main-documents-reply', (event, arg) => {
    console.log('æ”¶åˆ°ä¸»è¿›ç¨‹å›å¤:', arg);
    });</pre>
    <p>è¯­æ³•ç³–å†™æ³•:</p>
    <pre>
    // åœ¨é¡¹ç›®çš„ä»»æ„ä½ç½®ã€‚
    let documentsPath = await Main.app.getPath('documents');</pre>
            </div>
            <div class="code-example">
                <h4>2. NodeJSè¯»å–æ–‡ä»¶ã€‚ </h4>
                <p>ä¼ ç»Ÿå†™æ³•ï¼š</p>
                <pre>
    // é¦–å…ˆ è¦åœ¨ä¸»è¿›ç¨‹ä¸­ç›‘å¬è¯·æ±‚ã€‚
    const os = Require('os');
    const path = Require('path');
    const fs = Require('fs');
    const homeDirectory = os.homedir();
    const filePathToRead = path.join(homeDirectory, 'my_test_document.txt');
    const fileContent = fs.readFileSync(filePathToRead, 'utf-8');
    // è¿˜éœ€è¦åœ¨ä¸»è¿›ç¨‹ç›‘å¬æ¸²æŸ“è¿›ç¨‹å‘é€çš„äº‹ä»¶
    ipcMain.on('getFileContent', (event, arg) => {
        // å›å¤æ¸²æŸ“è¿›ç¨‹
        event.reply('main-documents-reply', fileContent);
    });
    // å…¶æ¬¡ åœ¨æ¸²æŸ“è¿›ç¨‹è¿˜éœ€è¦ç›‘å¬å“åº”å›å¤çš„ç»“æœ
    ipcRenderer.on('main-file-content-reply', (event, arg) => {
    console.log('æ”¶åˆ°ä¸»è¿›ç¨‹å›å¤:', arg);
    });</pre>
    <p>è¯­æ³•ç³–å†™æ³•:</p>
    <pre>
    const homeDirectory = await NodeJS.os.homedir();
    const filePathToRead = await NodeJS.path.join(homeDirectory, 'my_test_document.txt');
    const fileContent = await NodeJS.fs.readFileSync(filePathToRead, 'utf-8');</pre>
            </div>
            <div class="code-example">
                            <h4>3. è®¿é—®æ’ä»¶ã€‚æˆ‘å†™äº†ä¸€ä¸ªæ’ä»¶åœ¨mainç›®å½•ä¸‹ï¼Œä»¥WENJIAN.fn.jså‘½å</h4>
                            <p>æ’ä»¶å†…å®¹:</p>
                            <pre>
    // æ’ä»¶ä»£ç 
    const WENJIAN = {
        read: function () {
            console.log('Electron version:', process.versions.electron);
            console.log('Node.js version:', process.versions.node);
            console.log('Chromium version:', process.versions.chrome);
            return 'hello world';
        },
        write: function (data) {
            console.log(data);
        }
    }
    module.exports = WENJIAN;
    </pre>
                <p>é¡¹ç›®ä»»æ„ä½ç½®ä½¿ç”¨æ’ä»¶:</p>
                <pre>//æ— éœ€å¼•å…¥
    await PJS.WENJIAN.read()</pre>
            </div>
            <div class="code-example">
                <h4>4. ä½¿ç”¨æ³¨é‡Š@mainProcesså°†è¿™ä¸ªå‡½æ•°å˜ä¸ºä¸»è¿›ç¨‹ä»£ç </h4>
                <pre>// @mainProcess
export async function getSystemInfo() {
    return os.cpus();
}</pre>
            </div>
        </div>
      </div>

      <!-- çª—å£ç®¡ç†å†…å®¹ -->
      <div v-if="activeTab === 'window'" class="content-section">
        <h1>çª—å£ç®¡ç†ä½¿ç”¨æ¡ˆä¾‹</h1>
        
        <div class="example-card">
          <h3>ğŸªŸ Electron çª—å£ç®¡ç†</h3>
          
          <div class="code-example">
            <h4>1. åˆ›å»ºæ–°çª—å£(window.windowManager.openWindow)ï¼Œå¹¶ç›‘å¬åŠ è½½å®Œæ¯•å’Œå…³é—­çª—å£</h4>
            <pre>let winInfo = await window.windowManager.openWindow('/help-window', {
    width: 1200,
    height: 900
});
console.log('Window created with ID(winInfo):', winInfo);
winInfo.webContents.on(
    'did-stop-loading',
    (res) => {
        console.log('Window did-stop-loading ========================= loaded');
        console.log(res)
    }
);
winInfo.on('close', () => {
    console.log('Window close');
})</pre>
          </div>

          <div class="code-example">
            <h4>2. å…³é—­å½“å‰çª—å£</h4>
            <pre>// æ¸²æŸ“è¿›ç¨‹å‘é€æ¶ˆæ¯
const currentWin = window.windowManager.getWindow();
currentWin.close()</pre>
          </div>

          <div class="code-example">
            <h4>3. çª—å£çŠ¶æ€ç®¡ç†</h4>
            <pre>// çª—å£æœ€å°åŒ–ã€æœ€å¤§åŒ–ã€å…³é—­
win.minimize()
win.maximize()
win.close()

// ç›‘å¬çª—å£äº‹ä»¶
win.on('closed', () => {
  console.log('çª—å£å·²å…³é—­')
})

win.on('resize', () => {
  console.log('çª—å£å¤§å°å·²æ”¹å˜')
})</pre>
          </div>
          
          <div class="action-buttons">
            <button class="demo-btn" @click="openNewWindow">æ‰“å¼€æ–°çª—å£</button>
            <button class="demo-btn" @click="minimizeWindow">æœ€å°åŒ–çª—å£</button>
            <button class="demo-btn" @click="toggleMaximize">åˆ‡æ¢æœ€å¤§åŒ–</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref } from 'vue'

// å“åº”å¼æ•°æ®
const activeTab = ref('home')

// æ–¹æ³•å®šä¹‰
const openNewWindow = async () => {
    // è¿™é‡Œå¯ä»¥è°ƒç”¨ Electron API æ‰“å¼€æ–°çª—å£
    console.log('æ‰“å¼€æ–°çª—å£')
    let winInfo = await window.windowManager.openWindow('/other-window', {
        width: 1200,
        height: 900
    });

}

const minimizeWindow = () => {
    const currentWin = window.windowManager.getWindow();
    currentWin.minimize();
    // æœ€å°åŒ–å½“å‰çª—å£
    console.log('æœ€å°åŒ–çª—å£')
}

const toggleMaximize = () => {
    // åˆ‡æ¢æœ€å¤§åŒ–çŠ¶æ€
    console.log('åˆ‡æ¢æœ€å¤§åŒ–')
    const currentWin = window.windowManager.getWindow();
    currentWin.maximize();
}
</script>

<style scoped>
.app-container {
  display: flex;
  height: 100vh;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

/* å·¦ä¾§èœå•æ ·å¼ */
.sidebar {
  width: 250px;
  background: linear-gradient(180deg, #2c3e50 0%, #34495e 100%);
  color: white;
  display: flex;
  flex-direction: column;
  box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
}

.logo {
  padding: 20px;
  text-align: center;
  border-bottom: 1px solid #34495e;
}

.logo h2 {
  margin: 0;
  color: #ecf0f1;
  font-size: 24px;
  font-weight: 600;
}

.nav-menu {
  flex: 1;
  padding: 20px 0;
}

.nav-item {
  display: flex;
  align-items: center;
  padding: 15px 20px;
  cursor: pointer;
  transition: all 0.3s ease;
  border-left: 3px solid transparent;
}

.nav-item:hover {
  background-color: #34495e;
  border-left-color: #3498db;
}

.nav-item.active {
  background-color: #3498db;
  border-left-color: #2980b9;
}

.nav-item .icon {
  font-size: 18px;
  margin-right: 12px;
  width: 20px;
  text-align: center;
}

.nav-item span {
  font-size: 16px;
  font-weight: 500;
}

/* å³ä¾§å†…å®¹åŒºåŸŸæ ·å¼ */
.main-content {
  flex: 1;
  padding: 30px;
  background-color: #f8f9fa;
  overflow-y: auto;
}

.content-section h1 {
  color: #2c3e50;
  margin-bottom: 30px;
  font-size: 32px;
  font-weight: 600;
}

.intro-card, .example-card {
  background: white;
  border-radius: 12px;
  padding: 30px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  margin-bottom: 20px;
}

.intro-card h3, .example-card h3 {
  color: #2c3e50;
  margin-bottom: 15px;
  font-size: 24px;
}

.intro-card h4 {
  color: #34495e;
  margin: 25px 0 15px 0;
  font-size: 18px;
}

.intro-card p {
  color: #7f8c8d;
  line-height: 1.6;
  font-size: 16px;
}

.intro-card ul {
  color: #7f8c8d;
  line-height: 1.8;
}

.intro-card li {
  margin-bottom: 8px;
}

.tech-stack {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-top: 15px;
}

.tech-tag {
  background: linear-gradient(135deg, #3498db, #2980b9);
  color: white;
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 14px;
  font-weight: 500;
}

.code-example {
  margin-bottom: 25px;
}

.code-example h4 {
  color: #2c3e50;
  margin-bottom: 10px;
  font-size: 16px;
}

.code-example pre {
  background: #2c3e50;
  color: #ecf0f1;
  padding: 20px;
  border-radius: 8px;
  overflow-x: auto;
  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
  font-size: 14px;
  line-height: 1.5;
}

.action-buttons {
  display: flex;
  gap: 15px;
  margin-top: 25px;
  flex-wrap: wrap;
}

.demo-btn {
  background: linear-gradient(135deg, #3498db, #2980b9);
  color: white;
  border: none;
  padding: 12px 20px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  transition: all 0.3s ease;
}

.demo-btn:hover {
  background: linear-gradient(135deg, #2980b9, #1f5f8b);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
}

.demo-btn:active {
  transform: translateY(0);
}

/* æ»šåŠ¨æ¡æ ·å¼ */
.main-content::-webkit-scrollbar {
  width: 8px;
}

.main-content::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 4px;
}

.main-content::-webkit-scrollbar-thumb {
  background: #bdc3c7;
  border-radius: 4px;
}

.main-content::-webkit-scrollbar-thumb:hover {
  background: #95a5a6;
}
</style>